(function(e){function t(t){for(var a,s,u=t[0],o=t[1],c=t[2],d=0,f=[];d<u.length;d++)s=u[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,u=1;u<n.length;u++){var o=n[u];0!==r[o]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={index:0},i=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],o=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=o;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("b635")},"0fc8":function(e,t,n){"use strict";n("92d1")},1270:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"inputRow"},[e._v(" "+e._s(e.label)+" "),n("react-TextField",{attrs:{kind:"outline",className:"input",defaultValue:e.value,"data-test":"input_"+e.label},on:{onChange:e.emitValue,onFocus:e.selectAll}})],1)},r=[],i=(n("5319"),n("ac1f"),n("b8ae")),s=n("4ac2"),u={name:"Input",components:{"react-TextField":Object(i["ReactInVue"])(s["TextField"])},props:{label:String,value:String},methods:{selectAll:function(e){e.target.select()},emitValue:function(e){var t=e.target.value,n=t.replace(/[^0-9().,-]/g,"")||0;e.target.value=n,this.$emit("set-value",n)}}},o=u,c=(n("3b5b"),n("2877")),l=Object(c["a"])(o,a,r,!1,null,"1f703c5c",null);t["a"]=l.exports},"28b7":function(e,t,n){},"2a56":function(e,t,n){"use strict";n("28b7")},"3b5b":function(e,t,n){"use strict";n("97d9")},"92d1":function(e,t,n){},"97d9":function(e,t,n){},b635:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",attrs:{id:"app"}},[e.validConfig?e._e():n("InvalidConfig",{attrs:{mode:e.mode},on:{configure:e.configure}}),0===e.selected.length&&0===e.trigger&&(0===e.location||1===e.location&&1===e.display)?n("div",{staticClass:"tip"},[e._v(" Select marks to update their value. ")]):e._e(),n("div",{staticClass:"centerRow"},[0===e.trigger||0===e.display&&1===e.location?e._e():n("react-Button",{attrs:{"data-test":"button_select"},on:{onClick:e.getSelectedMarks}},[e._v(" "+e._s(e.selectBtnLabel)+" ")])],1),1===e.location&&(e.selected.length>0||0===e.display)?n("div",{staticClass:"unitLabel"},[e._v(" "+e._s(e.unitLabel)+" ")]):e._e(),e._l(e.values,(function(t){return n("div",{key:t.name,staticClass:"inputContainer"},[1!==e.location||!e.selected.includes(t.name)&&0!==e.display?e._e():n("Input",{attrs:{label:t.name,value:t.value},on:{"set-value":function(e){t.value=e}}})],1)}))],2)},i=[],s=n("b85c"),u=n("2909"),o=n("1da1"),c=(n("96cf"),n("caad"),n("2532"),n("7db0"),n("b0c0"),n("d81d"),n("6062"),n("d3b7"),n("3ca3"),n("ddb0"),n("4d63"),n("ac1f"),n("25f0"),n("466d"),n("a15b"),n("99af"),n("1270")),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"cover"},[n("div",{staticClass:"error"},[e._v(" The extension needs to be "),"authoring"===e.mode?n("a",{attrs:{href:"javascript:"},on:{click:function(t){return e.$emit("configure")}}},[e._v(" configured.")]):n("span",[e._v(" configured. "),n("br"),e._v(" Please contact the dashboard author ")])])])},d=[],f={name:"InvalidConfig",props:{mode:String}},p=f,h=(n("2a56"),n("2877")),b=Object(h["a"])(p,l,d,!1,null,"b787eb7e",null),g=b.exports,v=n("b8ae"),m=n("4ac2"),y={name:"Index",components:{Input:c["a"],InvalidConfig:g,"react-Button":Object(v["ReactInVue"])(m["Button"])},data:function(){return{values:[],selected:[],validConfig:!1,unregister:function(){},location:0,trigger:0,display:0,mode:"viewing",unitLabel:"##",selectBtnLabel:"Select"}},methods:{configure:function(){var e=this,t=window.location.origin.includes("localhost:8080")?window.location.origin:".";tableau.extensions.ui.displayDialogAsync("".concat(t,"/config.html"),"",{width:350,height:550}).then((function(){e.getMembers()}))},markSelected:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getMarksAsync();case 2:n=e.sent,this.displaySelected(n.data[0]);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getSelectedMarks:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=tableau.extensions.settings.getAll(),n=tableau.extensions.dashboardContent.dashboard,a=n.worksheets.find((function(e){return e.name===t.worksheet})),e.next=5,a.getSummaryDataAsync({ignoreSelection:!1});case 5:r=e.sent,this.displaySelected(r);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),displaySelected:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a,r,i,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=tableau.extensions.settings.getAll(),a=t.columns.find((function(e){return e.fieldName===n.field})),r=t.data.map((function(e){return e[a.index].value})),r=Object(u["a"])(new Set(r)),i=r.length,0!==i){e.next=7;break}return e.abrupt("return",this.selected=[]);case 7:if(this.selected=r,s=0===this.display,0!==this.location){e.next=21;break}return o=JSON.stringify({values:this.values,selected:this.selected,showAll:s,unitLabel:this.unitLabel}),c=window.location.origin.includes("localhost:8080")?window.location.origin:".",e.prev=12,e.next=15,tableau.extensions.ui.displayDialogAsync("".concat(c,"/popup.html"),o,{width:350,height:Math.min(350,30*(s?this.values.length:i)+25)});case 15:this.updateValues(),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](12),e.t0.errorCode===tableau.ErrorCodes.DialogClosedByUser&&this.updateValues();case 21:case"end":return e.stop()}}),e,this,[[12,18]])})));function t(t){return e.apply(this,arguments)}return t}(),getMembers:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r,i,o,c,l,d,f,p,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.values=[],this.selected=[],t=tableau.extensions.settings.getAll(),this.location=t.location?parseInt(t.location):this.location,this.trigger=t.trigger?parseInt(t.trigger):this.trigger,this.display=t.display?parseInt(t.display):this.display,this.unitLabel=t.unitLabel?t.unitLabel:this.unitLabel,this.selectBtnLabel=t.selectBtnLabel?t.selectBtnLabel:this.selectBtnLabel,t.parameter&&t.worksheet&&t.field){e.next=10;break}return e.abrupt("return",this.validConfig=!1);case 10:return n=tableau.extensions.dashboardContent.dashboard,e.next=13,n.findParameterAsync(t.parameter);case 13:if(a=e.sent,a){e.next=16;break}return e.abrupt("return",this.validConfig=!1);case 16:if(r=n.worksheets.find((function(e){return e.name===t.worksheet})),r){e.next=19;break}return e.abrupt("return",this.validConfig=!1);case 19:return e.next=21,r.getSummaryDataAsync({ignoreSelection:!0});case 21:if(i=e.sent,o=i.columns.find((function(e){return e.fieldName===t.field})),o){e.next=25;break}return e.abrupt("return",this.validConfig=!1);case 25:c=new Set,l=i.data,d=Object(s["a"])(l);try{for(d.s();!(f=d.n()).done;)p=f.value,c.add(p[o.index].value)}catch(b){d.e(b)}finally{d.f()}h=a.currentValue.value,this.values=Object(u["a"])(c).map((function(e){var t=new RegExp(e+"\\|(-?\\d*\\.?\\,?\\d*)"),n=h.match(t)?h.match(t)[1]:"0";return{name:e,value:n}})),this.unregister(),0===this.trigger&&!1===(1===this.location&&0===this.display)&&(this.unregister=r.addEventListener(tableau.TableauEventType.MarkSelectionChanged,this.markSelected)),this.validConfig=!0;case 34:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateValues:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=tableau.extensions.settings.getAll(),n=tableau.extensions.dashboardContent.dashboard,e.next=4,n.findParameterAsync(t.parameter);case 4:if(a=e.sent,a){e.next=7;break}return e.abrupt("return",this.validConfig=!1);case 7:r=a.currentValue.value,this.values=Object(u["a"])(this.values).map((function(e){var t=new RegExp(e.name+"\\|(-?\\d*\\.?\\,?\\d*)"),n=r.match(t)?r.match(t)[1]:"0";return{name:e.name,value:n}}));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},watch:{values:{handler:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=tableau.extensions.settings.getAll(),a=tableau.extensions.dashboardContent.dashboard,e.next=4,a.findParameterAsync(n.parameter);case 4:if(r=e.sent,r){e.next=7;break}return e.abrupt("return",this.validConfig=!1);case 7:r.changeValueAsync(t.map((function(e){return"{".concat(e.name,"|").concat(e.value,"}")})).join(""));case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),deep:!0}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,tableau.extensions.initializeAsync({configure:this.configure});case 2:this.getMembers(),this.mode=tableau.extensions.environment.mode;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},w=y,x=(n("0fc8"),Object(h["a"])(w,r,i,!1,null,null,null)),k=x.exports;a["default"].use(v["VuePlugin"]),a["default"].config.productionTip=!1,new a["default"]({render:function(e){return e(k)}}).$mount("#app")}});
//# sourceMappingURL=index.4390f731.js.map